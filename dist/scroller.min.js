class Scroller{leftCycle(t,e){for(this.btnIndex=0;this.btnIndex<this.btnLength&&!this.paused;){if(this.newBtnPos=t[this.btnIndex].offsetLeft-1,this.resetCondition=0-t[this.btnIndex].offsetWidth,this.newBtnPos<=this.resetCondition){let n=t[this.lastBtnIndex].offsetLeft+t[this.lastBtnIndex].offsetWidth-1;t[this.btnIndex].style.left=n+"px",t[this.btnIndex].style.transition="left "+e+"ms linear",this.lastBtnIndex=this.btnIndex}else t[this.btnIndex].style.left=this.newBtnPos+"px",t[this.btnIndex].style.transition="left "+e+"ms linear";this.btnIndex++}}rightCycle(t,e){for(this.btnIndex=0;this.btnIndex<this.btnLength&&!this.paused;){if(this.newBtnPos=t[this.btnIndex].offsetLeft+1,this.resetCondition=t[this.lastBtnIndex].offsetLeft,0==this.resetCondition){let n=1-t[this.btnIndex].offsetWidth;t[this.btnIndex].style.left=n+"px",t[this.btnIndex].style.transition="left "+e+"ms linear",this.lastBtnIndex=this.btnIndex}else t[this.btnIndex].style.left=this.newBtnPos+"px",t[this.btnIndex].style.transition="left "+e+"ms linear";this.btnIndex++}}calculatePositions(t,e,n,s,i,h){for(var d=t.length-1;d>=s;d--)t[d].parentNode.removeChild(t[d]);let l=0;for(;i<e.offsetWidth+h;){var o=t[l].cloneNode(!0);e.appendChild(o),i+=t[l].offsetWidth,l++}let f=0;for(l=t.length-1;l>=0;l--)t[l].style.left=f+"px",f+=t[l].offsetWidth;"left"==n.direction?this.lastBtnIndex=0:this.lastBtnIndex=t.length-1,this.btnLength=t.length}constructor(t,e){const n=document.querySelector(t),s=n.children,i=s.length;this.paused=!1;let h=0,d=0;for(var l=s.length-2;l>=0;l--){let t=s[l].offsetWidth;h+=t,t>d&&(d=t)}let o=0;e.performance||null==e.performance||(o=e.speed),this.calculatePositions(s,n,e,i,h,d),window.addEventListener("resize",function(){this.calculatePositions(s,n,e,i,h,d)}.bind(this)),n.addEventListener("mouseover",function(){this.paused=!0}.bind(this)),n.addEventListener("mouseout",function(){this.paused=!1}.bind(this)),this.btnIndex,this.btnLength,this.newBtnPos,this.resetCondition,this.lastBtnIndex,"left"==e.direction?setInterval(function(){this.leftCycle(s,o)}.bind(this),e.speed):"right"==e.direction&&setInterval(function(){this.rightCycle(s,o)}.bind(this),e.speed)}}module.exports = Scroller;
